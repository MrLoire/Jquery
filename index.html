<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Index</title>
  <script src="https://code.jquery.com/jquery-3.7.1.js"
          integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
          crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">

  <style>
    body {
	  background-image: url('afbeeldingen/start.jpg');
	  background-position: center;
	  background-size: cover;
	  background-repeat: no-repeat;
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    header {
      background: #333;
      color: white;
      padding: 0.1rem;
    }
	nav {
	  display: flex;
	  justify-content: space-between;
	  align-items: center;
	}
	nav .menu {
	  display: flex;
	  gap: 1rem;
	  list-style: none;
	  margin: 0;
	  margin-right: 1%;
	  padding: 0;
	}
	nav .menu li a {
	  color: white;
	  text-decoration: none;
	  font-weight: bold;
	  padding: 0.25rem 0.5rem;  
	  border-radius: 5px;       
	  transition: background-color 0.3s, color 0.3s;
	}
	nav .menu li a:hover {
	  background-color: rgba(255, 255, 255, 0.2);
	}
	nav .menu li a.active {
	  color: #ffcc00;              
	  background-color: rgba(0, 0, 0, 0.3);
	}
	.logo img {
	  max-height: 50px;
	  height: auto;
	  width: auto;
	}
	.hamburger {
	  display: none;
	  font-size: 1.8rem;
	  cursor: pointer;
	  user-select: none;
	}
    .container {
      display: flex;
      gap: 2%;
      margin: 1%;
      flex: 1 0 auto;
    }
    .sidebar {
      flex: 24%;
	  background-image: url('afbeeldingen/graniet.jpg');
	  background-position: center;
	  background-size: cover;
	  background-repeat: no-repeat;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1%;
      position: relative;
      overflow: visible;
    }
    .button-wrapper {
      position: relative;
      height: 18%;
    }
    .button-wrapper .hole {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: transparent;
      transition: background-color 1.0s ease;
      z-index: 1;
    }
    .button-wrapper button {
	  font-size:x-large;
	  font-weight:bold;
      position: relative;
      width: 100%;
      height: 100%;
      border: none;
	  background-image: url('afbeeldingen/graniet.jpg');
	  background-position: center;
	  background-size: cover;
	  background-repeat: no-repeat;
      cursor: pointer;
      transition: transform 1.5s ease;
      z-index: 2;
    }
	.button-wrapper button:hover:not(.active) {
	  transform: translateX(30%);
	}
	.button-wrapper button.active {
	  transform: translateX(10%);
	}
    .button-wrapper button.active + .hole,
    .button-wrapper button:hover:not(.active) + .hole {
      background-color: black;
    }
    .main {
      flex: 74%;
      padding: 0.5rem;
      min-height: 300px;
      position: relative;
	  display: flex;
      flex-direction: column;
    }
    footer {
      background-color: rgba(204,204,204,1);
      text-align: right;
      padding: 0.5rem 10px;
      flex-shrink: 0;
    }
    footer h4 {
      font-family: Georgia, "Times New Roman", Times, serif;
      margin: 0;
    }
	p {
	  font-size:large;
	}
	.main-initial {
	  width: 100%;
	  height: 100%;
	  display: flex;
	  justify-content: flex-end;
	  align-items: center;
	  background-color: rgba(0,0,0,0.1);
	  padding-right: 10%;
	  box-sizing: border-box;
	  overflow: hidden;
	  position: relative;
	  background-position:center;
	  background-size:cover;
	  background-repeat:no-repeat;
	}
	.main-initial::after {
	  content: '';
	  position: absolute;
	  top:0;
	  left:0;
	  width:100%;
	  height:100%;
	  background-color: rgba(255,255,255,0.5);
	  opacity: 0;
	  pointer-events: none;
	  transition: opacity 0.05s ease-in-out;
	  z-index: 10;
	}
	#thunder-overlay {
	  position: fixed;
	  top: 0; left: 0; right: 0; bottom: 0;
	  background-color: transparent;
	  pointer-events: none;
	  z-index: 9999;
	}
	.dungeon-text {
	  font-size: 6rem;
	  color: #ff0000;
	  font-family: 'Creepster', cursive;
	  text-shadow: 
		2px 2px 0 #000,
		4px 4px 0 #550000,
		6px 6px 0 #330000;
	  line-height: 1.1;
	  text-align: right;
	  animation: bleed-shake 1s infinite alternate;
	}
	@keyframes bleed-shake {
	  0%   { transform: translateY(0) rotate(0deg); }
	  25%  { transform: translateY(-2px) rotate(-1deg); }
	  50%  { transform: translateY(2px) rotate(1deg); }
	  75%  { transform: translateY(-2px) rotate(-1deg); }
	  100% { transform: translateY(2px) rotate(1deg); }
	}
	.content {
	  flex: 1;
	  display: none;
	  padding: 2rem;
	  color: white;
	  min-height: 400px;
	  background-position: center;
	  background-size: cover;
	  background-repeat: no-repeat;
	}
	.content[data-id="1"] p {
	  max-width: 35%;      
	  margin-right: auto;
	  font-size:x-large;
	}
	.content[data-id="2"] p {
	  max-width: 40%;
	  margin-right: auto;
	  font-size:x-large ;
	}
	.content[data-id="3"] p {
	  max-width: 40%;      
	  margin-left: auto; 
	  font-size:x-large ;  
	  transform: translateY(20%);
	}
	.content[data-id="4"] p {
	  max-width: 40%;      
	  margin-right: auto;
	  font-size:x-large ; 
	}
	.content[data-id="5"] p {
	  max-width: 42%;      
	  margin-left: auto;
	  font-size:x-large ;   
	}	
	.content[data-id="1"] {
	  background-image: url('afbeeldingen/content1.png');
	}
	.content[data-id="2"] {
	  background-image: url('afbeeldingen/content2.jpg');
	}
	.content[data-id="3"] {
	  background-image: url('afbeeldingen/content3.png');
	}
	.content[data-id="4"] {
	  background-image: url('afbeeldingen/content4.png');
	}
	.content[data-id="5"] {
	  background-image: url('afbeeldingen/content5.png');
	}
	#monster-overlay {
		position: fixed;
		top:0; left:0;
		width:100%; height:100%;
		background-image: url('afbeeldingen/monster.png');
		background-position: center;
		background-size: contain;
		background-repeat: no-repeat;
		display:none;
		z-index:20000;
		transform: translate(-50%,-50%) scale(1);
		top:50%; left:50%;
		transition: transform 2s cubic-bezier(0.8,0,0.2,1);
	}
	#page-flash {
		position: fixed;
		top:0; left:0;
		width:100%; height:100%;
		background-color: white;
		display:none;
		z-index:25000;
	}
	.flash-red { color: red !important;
	}
	#next-section, #start-button {
	  display: none;            
	  position: absolute;         
	  z-index: 1000;
	  width: 15%;              
	  height: 6%;              
	  background-image: url('afbeeldingen/graniet.jpg');
	  background-size: cover;
	  background-position: center;
	  border-radius: 10px;
	  cursor: pointer;
	  text-align: center;
	  line-height: 0.5rem;
	  font-size: 2rem;
	  color: black;
	  font-weight: bold;
	  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
	  border: ridge;
	  transition: transform 0.1s ease;
	}
	#next-section {
	  bottom: 5%;
	  left: 50%;
	  transform: translate(-50%, -50%);
	}
	#start-button {
	  top: 75%;
	  left: 65%;
	  transform: translate(-50%, -50%);
	  border: ridge;
	}
	#next-section:hover, #start-button:hover {
	  animation: shake 0.5s infinite;
	}
	@keyframes shake {
	  0%   { transform: translate(-50%, -50%) translateX(0px); }
	  20%  { transform: translate(-50%, -50%) translateX(2px) rotate(1deg); }
	  40%  { transform: translate(-50%, -50%) translateX(-2px) rotate(-1deg); }
	  60%  { transform: translate(-50%, -50%) translateX(2px) rotate(1deg); }
	  80%  { transform: translate(-50%, -50%) translateX(-2px) rotate(-1deg); }
	  100% { transform: translate(-50%, -50%) translateX(0px) rotate(0deg); }
	}

    @media (max-width: 1024px) {
      .hamburger {
        display: block;
      }
      nav .menu {
        display: none;
        flex-direction: column;
        background: #444;
        padding: 1rem;
        margin-top: 1rem;
      }
      nav .menu.active {
        display: flex;
      }
      .container {
		max-height:70vh;
        flex-direction: column;
      }
	  .sidebar {
		display: none;
	  }
	  .content {
		  transform: translateY(-15%)
	  }
	  .main, .main-initial {
		width: 100%; 
		float: none;
	  }
	  .main, .main-initial {
		padding: 1rem;
	  }
      .button-wrapper {
        height: 60px;
      }
	  #next-section, #start-button {
		width: 40%;       
		height: 8%;         
		font-size: 1.5rem;  
		line-height: 1rem;
	  }
	  #next-section {
		bottom: 8%;          
	  }
	  #start-button {
		top: 10%;           
		left: 50%;           
	  }
	  #next-section:hover, #start-button:hover {
		animation: shake 0.3s infinite;
	  }
	  @keyframes shake {
		0%   { transform: translate(-50%, -50%) translateX(0px); }
		20%  { transform: translate(-50%, -50%) translateX(1px) rotate(0.5deg); }
		40%  { transform: translate(-50%, -50%) translateX(-1px) rotate(-0.5deg); }
		60%  { transform: translate(-50%, -50%) translateX(1px) rotate(0.5deg); }
		80%  { transform: translate(-50%, -50%) translateX(-1px) rotate(-0.5deg); }
		100% { transform: translate(-50%, -50%) translateX(0px) rotate(0deg); }
	  }
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="logo">
        <img src="afbeeldingen\logo.png" alt="Mijn Site Logo">
      </div>
      <div class="hamburger">&#9776;</div>
      <ul class="menu">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </nav>
  </header>
  <div id="magic-flash" style="
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0);
    pointer-events:none;
    opacity:0;
    z-index:10000;"></div>
  <div id="wall-overlay" style="
    position: fixed;
    top:0; left:0;
    width: 100%; height: 100%;
    display: flex;
    z-index: 9999;
    cursor: url('afbeeldingen/Wand.png'), auto;">
      <div id="wall-left" style="
        flex: 1;
        background: url('afbeeldingen/wall-left.png') center/cover no-repeat;
        transition: transform 2s ease;"></div>
      <div id="wall-right" style="
        flex: 1;
        background: url('afbeeldingen/wall-right.png') center/cover no-repeat;
        transition: transform 2s ease;"></div>
      <div id="wall-instruction" style="
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 3rem;
      font-weight: bold;
      text-shadow: 2px 2px 8px black;
      text-align: center;
      pointer-events: none;">
      Raak de muur aan met de toverstaf om hem te openen
    </div>
  </div>
  <div class="container">
    <aside class="sidebar">
      <h1 align="center">Zijmuur</h1>
    
      <div class="button-wrapper">
        <button data-id="1">De Ingang</button>
        <div class="hole"></div>
      </div>
      <div class="button-wrapper">
        <button data-id="2">De Eerste Tekenen</button>
        <div class="hole"></div>
      </div>
      <div class="button-wrapper">
        <button data-id="3">De Echo's</button>
        <div class="hole"></div>
      </div>
      <div class="button-wrapper">
        <button data-id="4">De Martelkamer</button>
        <div class="hole"></div>
      </div>
      <div class="button-wrapper">
        <button data-id="5">Het Hart Van De Duisternis</button>
        <div class="hole"></div>
      </div>
    </aside>

    <main class="main">
      <div class="main-initial">
        <h1 class="dungeon-text">Welcome to the dungeon</h1>
      </div>
      <div class="content" data-id="1">
        <p>Het gekraak van eeuwenoud gesteente vult de ruimte en verstomt dan plots, waarna een opening zichtbaar wordt die tot voor kort volledig verborgen was.<br><br>Uit de donkere doorgang gloeit een zwak, flakkerend licht – vaag, haast als een ademhaling. Het licht werpt grillige schaduwen op de muren om je heen, alsof de duisternis zelf siddert.<br><br>Een bedompte lucht ontsnapt uit de opening, zwaar en muf, vermengd met een geur van nat steen en iets roestigs dat op je tong blijft hangen. Het is alsof de muur niet alleen een doorgang onthulde, maar ook een herinnering die beter vergeten was.</p>
      </div>
      
      <div class="content" data-id="2">
        <p>Verder naar beneden wordt de lucht zwaar en kleverig Het lijkt bijna alsof de duisternis tastbaar wordt.<br><br>De muren zijn bekrast met onregelmatige patronen, groeven zo diep dat ze enkel met geweld in het steen kunnen zijn gekerfd. Hier en daar glinsteren donkerrode vlekken, uitgedroogd en oud, maar onmiskenbaar sporen van bloed.<br><br>De gangen zijn smal en beklemmend, alsof ze je opslokken. Je voelt het besef groeien dat dit geen toevluchtsoord was, maar een valkuil. Elke steen, elke kras ademt de pijn en wanhoop van hen die hier ooit vastzaten.</p>
      </div>
      
      <div class="content" data-id="3">
        <p>De stilte breekt. In de verte weergalmt een geluid dat je hart sneller doet slaan – een korte kreet, maar net echt genoeg om je bloed te doen verstijven.<br><br>De lucht draagt een misselijkmakende stank: oud ijzer vermengd met iets zoets dat alleen verrotting kan zijn. Op de grond liggen kettingen, hun schakels zo doorgeroest dat ze in de steen lijken te zijn gegroeid. Daartussen liggen botten, sommige nog met rafelige resten vlees eraan gekleefd, alsof ze eeuwenlang in de vochtige kilte zijn blijven rotten.<br><br>En steeds, bij elke stap, hoor je die echo’s… alsof stemmen uit het verleden hun laatste kreten blijven herhalen.</p>
      </div>
      
      <div class="content" data-id="4">
        <p>Plots opent de gang zich in een grotere ruimte, en de kilte grijpt je steviger vast. Aan de muren hangen ijzeren ringen en haken, sommigen nog met flarden vergaan touw of leer eraan bungelend.<br><br>In het midden staat een houten stoel, half vermolmd, maar duidelijk besmeurd met duistere, ingedroogde lagen die geen twijfel laten: hier is bloed vergoten, en veel.<br><br>De vloer is niet glad maar doordrenkt, alsof duizenden tranen en liters bloed zich een weg in de steen hebben gebrand.<br><br>Het is geen lege ruimte – je voelt dat er nog iets hangt, een aanwezigheid, alsof de kreten en de pijn nooit zijn verdwenen, maar nog altijd in de lucht sidderen.</p>
      </div>
      
      <div class="content" data-id="5">
        <div id="bg-flash-overlay" style="
          position: absolute;
          top:0; left:0; width:100%; height:100%;
          background-color: transparent;
          pointer-events: none;
          z-index: 5000;">
        </div>
        <p>Helemaal aan het einde van de gangen bereik je een zaal die groter is dan alles wat je eerder zag. Het lijkt een groteske troonzaal, opgebouwd uit de dood zelf.<br><br>Tegen de achterwand staat een troon, samengesteld uit schedels en beenderen, zorgvuldig gestapeld, alsof iemand een kunstwerk van lijden wilde scheppen. Uit holle oogkassen druipt kaarsvet, en de vlammen dansen onnatuurlijk, alsof ze gevoed werden door de adem van iets levends.<br><br>De lucht is zo zwaar dat ademen pijn doet; je longen vullen zich met een beklemmende warmte die je wil verstikken.

Dan merk je dat de muren pulseren, langzaam, als een gigantisch hart dat klopt in de stilte. Voor een fractie van een seconde denk je dat je ogen je bedriegen, maar het ritme versnelt – en je voelt het in je eigen borstkas, alsof jouw hart en dat van de dungeon samensmelten. De kaarsen flikkeren fel, de schaduwen schieten razendsnel over de muren… en op dat moment openen alle schedels hun mond tegelijk in een ijzige schreeuw.</p>
      </div>
      <button id="next-section">Volgende</button>
    </main>
    <button id="start-button">Start</button>
  </div>

  <footer>
    <h4><b>© All rights reserved<br/>Van den Bogert 2025</b></h4>
  </footer>

  <audio id="hoverSound" src="audio\stoneslide.mp3"></audio>
  <audio id="clickSound" src="audio\stoneslidereverse.mp3"></audio>
  <audio id="scream1" src="audio\scream1.wav" preload="auto"></audio>
  <audio id="scream2" src="audio\scream2.mp3" preload="auto"></audio>
  <audio id="ambientSound" src="audio/ambient.mp3" preload="auto"></audio>
  <audio id="thunderSound" src="audio/thunder.mp3" preload="auto"></audio>
  <audio id="wallCloseSound" src="audio/closing.wav" preload="auto"></audio>
  <audio id="heartbeat" src="audio/heartbeat.mp3"></audio>

  <div id="monster-overlay"></div>
  <div id="page-flash"></div>
  <div id="thunder-overlay"></div>

  <script>
  function flashColorsSimple(colors, interval = 150) {
    const $flash = $("#magic-flash");
    let i = 0;
    $flash.css("opacity", 1);
  
    const flashInterval = setInterval(() => {
      if (i >= colors.length) {
        clearInterval(flashInterval);
        $flash.css("opacity", 0);
        return;
      }
      $flash.css("background-color", colors[i]);
      i++;
    }, interval);
  }
  
  let thunderTimeoutId = null;
  let thunderIntervalId = null;
  
  function thunderFlash() {
    const overlay = document.getElementById("thunder-overlay");
    const thunder = document.getElementById("thunderSound");
    const time = Math.random() * 7000 + 8000;
  
    setTimeout(() => {
      let flashes = 3;
      let flashIndex = 0;
  
      const flashInterval = setInterval(() => {
        overlay.style.backgroundColor = (flashIndex % 2 === 0) ? "rgba(255,255,255,0.8)" : "transparent";
        flashIndex++;
        if (flashIndex >= flashes * 2) {
          clearInterval(flashInterval);
          thunder.currentTime = 0;
          thunder.play().catch(err => console.warn("Kon donder niet starten:", err));
          thunderFlash();
        }
      }, 100);
    }, time);
  }
  
  function stopThunderFlash() {
	clearTimeout(thunderTimeoutId);
	clearInterval(thunderIntervalId);
  }
  
  const screams = [
    document.getElementById("scream1"),
    document.getElementById("scream2")
  ];
  let screamInterval = null;
  
  function playRandomScream() {
    const randomIndex = Math.floor(Math.random() * screams.length);
    const scream = screams[randomIndex];
    scream.currentTime = 0;
    scream.play();
  }
  
  function startScreams() {
    screams.forEach(scream => {
      scream.currentTime = 0;
      scream.play();
    });
  
    function scheduleNextScream() {
      const delay = Math.random() * (3 - 1) * 60 * 1000 + 1 * 60 * 1000;
      screamInterval = setTimeout(() => {
        playRandomScream();
        scheduleNextScream();
      }, delay);
    }
    scheduleNextScream();
  }
  
  function startAmbientLoop() {
    const ambient = document.getElementById("ambientSound");
    ambient.loop = true;
    ambient.currentTime = 0;
    ambient.play().catch(err => {
      console.warn("Kon ambient niet starten:", err);
    });
  }
  
  $(document).ready(function () {
    $(".main, .main-initial").css("position", "relative");
  
    $(".hamburger").click(function () {
      $(".menu").toggleClass("active");
    });
  
    $(".sidebar button").css("pointer-events", "none");
  
    const totalStones = 5;
    let currentId = 0;
  
    function animateStone(id) {
      const $button = $(".sidebar button[data-id='" + id + "']");
      const hoverSound = $("#hoverSound")[0];
      const clickSound = $("#clickSound")[0];
  
      $button.animate({ transform: "translateX(30%)" }, 500, function() {
        hoverSound.currentTime = 0;
        hoverSound.play();
  
        $button.addClass("active").animate({ transform: "translateX(10%)" }, 1000, function() {
          clickSound.currentTime = 0;
          clickSound.play();
  
          $(".main .main-initial").fadeOut(300);
          $(".main .content").fadeOut(0);
          $(".main .content[data-id='" + id + "']").fadeIn(300, function() {
            if (id === 5) {
              $("#next-section").fadeOut(400);
              setTimeout(jumpscareContent5, 23000);
			  startHeartbeatAfterDelay(9000);
            }
          });
        });
      });
    }
  
    function nextStone() {
      if (currentId < totalStones) {
        currentId++;
        animateStone(currentId);
      }
    }
  
    $("#next-section").click(nextStone);
  
    function startExperience() {
      $("#start-button").fadeOut(200);
      startScreams();
      startAmbientLoop();
      wallCloseEffect();
	  thunderFlash();
    }
  
    if (!sessionStorage.getItem("wallShown")) {
        $("#wall-overlay").show();
    
        $("#wall-overlay").click(function () {
            $("#clickSound")[0].currentTime = 0;
            $("#clickSound")[0].play();
    
            startExperience();
  
            sessionStorage.setItem("wallShown", "true");
    
            flashColorsSimple([
                "rgba(255,0,0,0.6)",
                "rgba(0,255,0,0.6)",
                "rgba(0,150,255,0.6)"
            ], 100);
    
            $("#wall-instruction").css({ opacity: 0, transition: "opacity 0.2s ease" });
    
            setTimeout(function () {
                $("#wall-left").css("transform", "translateX(-100%)");
                $("#wall-right").css("transform", "translateX(100%)");
            }, 500);
    
            setTimeout(function () {
                $("#wall-overlay").fadeOut(300);
            }, 2500);
            wallCloseEffect();
        });
    } else {
        $("#wall-overlay").hide();
        $("#start-button").fadeIn(400).off("click").on("click", startExperience);
    }
  
	function wallCloseEffect() {
	  const mainInitial = $(".main-initial");
	  const dungeonText = $(".dungeon-text");
	  const sound = $("#wallCloseSound")[0];
	
	  setTimeout(() => {
		sound.currentTime = 0;
		sound.play().catch(err => console.warn("Kon wall close sound niet afspelen:", err));
	
		dungeonText.animate({opacity: 0}, 2000);

		const overlay = $("<div></div>").css({
		  position: "absolute",
		  top: 0,
		  left: 0,
		  width: "100%",
		  height: "100%",
		  backgroundImage: "url('afbeeldingen/stairwell.jpg')",
		  backgroundSize: "cover",
		  backgroundPosition: "center",
		  backgroundRepeat: "no-repeat",
		  opacity: 0,
		  zIndex: 5
		}).appendTo(mainInitial);

		const overlayText = $("<div>Met binnengaan valt de muur weer achter je dicht!</br>Je kunt alleen maar verder naar binnen!</div>").css({
		  position: "absolute",
		  top: "5%",         
		  left: "5%",
		  color: "#db3807",
		  fontSize: "2rem",
		  fontWeight: "bold",
		  textShadow: "2px 2px 8px rgba(0,0,0,0.7)",
		  opacity: 0,          
		  zIndex: 6
		}).appendTo(mainInitial);

		overlay.animate({opacity: 1}, 2000);
		overlayText.animate({opacity: 1}, 2000, () => {
		  mainInitial.css("background-image", "url('afbeeldingen/stairwell.jpg')");
		  overlay.remove();

		  $("body").css("background", "black");
	
		  $("#next-section").fadeIn(800);
		});
	  }, 8000);
	}

	function startHeartbeatAfterDelay(delay = 9000) {
		const heartbeatAudio = document.getElementById("heartbeat");
		setTimeout(() => {
			if (heartbeatAudio) {
				heartbeatAudio.currentTime = 0;
				heartbeatAudio.volume = 1.0; // maximaal 100% volume
				heartbeatAudio.play().catch(err => console.warn("Heartbeat kon niet starten:", err));
			}
		}, delay);
	}
  
    function jumpscareContent5() {
      const content5 = document.querySelector(".content[data-id='5']");
      const monster = document.getElementById("monster-overlay");
      const pageFlash = document.getElementById("page-flash");
      const scream = document.getElementById("scream1");
      const bgOverlay = document.getElementById("bg-flash-overlay");
  
      let t = 0;
      const textFlashInterval = setInterval(() => {
        content5.style.color = (Math.random() > 0.5) ? "white" : "red";
        t++;
        if (t >= 14) {
          clearInterval(textFlashInterval);
          content5.style.color = "white";
  
          let b = 0;
          const bgFlashInterval = setInterval(() => {
            bgOverlay.style.backgroundColor = (b % 2 === 0) ? "rgba(255,0,0,0.6)" : "transparent";
            b++;
            if (b >= 16) {
              clearInterval(bgFlashInterval);
              bgOverlay.style.backgroundColor = "transparent";
  
              content5.style.color = "transparent";
              monster.style.display = "block";
              monster.style.transformOrigin = "50% 20%";
              monster.style.transition = `transform 2000ms cubic-bezier(0.8,0,0.2,1)`;
  
              setTimeout(() => {
                scream.currentTime = 0;
                scream.play();
                monster.style.transform = "translate(-50%, -50%) scale(3.5)";
  
                let shakeCount = 0;
                const shakeInterval = setInterval(() => {
                  const x = (Math.random() - 0.5) * 20;
                  const y = (Math.random() - 0.5) * 20;
                  monster.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px)) scale(2.5)`;
                  shakeCount++;
                  if (shakeCount >= 16) {
                    clearInterval(shakeInterval);
                    monster.style.transform = "translate(-50%,-50%) scale(3.5)";
  
                    setTimeout(() => {
                      let flashCount = 0;
                      const finalFlashes = setInterval(() => {
                        pageFlash.style.display = (flashCount % 2 === 0) ? "block" : "none";
                        flashCount++;
                        if (flashCount >= 6) {
                          clearInterval(finalFlashes);
                          pageFlash.style.display = "none";
                          monster.style.display = "none";
                          monster.style.transform = "translate(-50%,-50%) scale(1)";
                          content5.style.color = "white";
  
                          setTimeout(() => {
                            $("#next-section")
                              .text("Escape")
                              .off("click")
                              .on("click", () => {
								stopThunderFlash();
                                sessionStorage.removeItem("wallShown");
                                location.reload();
                              })
                              .fadeIn(800);
                          }, 1000);
                        }
                      }, 100);
                    }, 1000);
                  }
                }, 50);
              }, 0);
            }
          }, 50);
        }
      }, 50);
    }
  });
  </script>
</body>
</html>

